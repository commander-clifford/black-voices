var psmMgrConfig={psmBrand:"HBO MAX",psmSubBrand:"hbomax.com",psmBootstrapVersion:"web/release/2.10.0",psmHost:"hbomax.com",psmContentMetadata:{page:[{name:"url",staticLocations:["location.href"]},{name:"title",staticLocations:["document.title"]}]},psmEnvironment:"release"},psmMgr={psmBootstrapProdEnvironment:psmMgrConfig.psmBootstrapProdEnvironment||"PROD",psmBootstrapNonProdEnvironment:psmMgrConfig.psmBootstrapNonProdEnvironment||"TEST",psmBootstrapVersion:psmMgrConfig.psmBootstrapVersion||0,psmBootstrapEnvironment:"TEST",psmGeoCookieName:psmMgrConfig.psmGeoCookieName||"countryCode",psmGeoExpectedCookieValues:psmMgrConfig.psmGeoExpectedCookieValues||["US","PR","VI","UM"],psmSendGeoInit:void 0===psmMgrConfig.psmSendGeoInit||psmMgrConfig.psmSendGeoInit,psmHost:-1===psmMgrConfig.psmHost.indexOf(".")?psmMgrConfig.psmHost+".com":psmMgrConfig.psmHost,psmShortCircuit:void 0!==psmMgrConfig.psmShortCircuit&&psmMgrConfig.psmShortCircuit,ttl:86400,psm_data_test_version:null,psm_test_ts:null,psm_data_test_environment:null,expires_ts:null,initPsm:function(){window.WM=window.WM||{},window.WM.PSM=window.WM.PSM||{},WM.PSM.initPsm({platform:psmMgrConfig.psmPlatform||"web",brand:psmMgrConfig.psmBrand,subBrand:void 0!==psmMgrConfig.psmSubBrand?psmMgrConfig.psmSubBrand:"",psmEnvironment:psmMgr.psmBootstrapEnvironment,countryCode:!0===psmMgr.psmSendGeoInit?psmMgr.psmGeoActualCookieValue:"",cookieDomain:psmMgr.psmHost,topics:psmMgrConfig.psmTopics||{},contentMetadata:psmMgrConfig.psmContentMetadata||{}})},loadScript:function(t,s){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,s&&o.addEventListener("load",s);var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(o,e)},getParameterByName:function(t){var s=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(s);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},getCookie:function(t){var s=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return s?s[2]:""},applyTestOverrides:function(){this.psm_data_test_version=this.getParameterByName("psm_data_test_version"),this.psm_test_ts=parseInt(this.getParameterByName("psm_test_ts")),this.psm_data_test_environment=this.getParameterByName("psm_data_test_environment"),this.psm_test_country_code=this.getParameterByName("psm_test_country_code"),now=Math.floor(Date.now()/1e3),this.expires_ts=this.psm_test_ts+this.ttl,this.psmBootstrapEnvironment="release"==psmMgrConfig.psmEnvironment?this.psmBootstrapProdEnvironment:this.psmBootstrapNonProdEnvironment,this.psm_test_ts&&now>this.psm_test_ts&&now<this.expires_ts&&(this.psmBootstrapVersion=this.psm_data_test_version||this.psmBootstrapVersion,this.psmBootstrapEnvironment=this.psm_data_test_environment||this.psmBootstrapEnvironment,this.psmGeoActualCookieValue=this.psm_test_country_code?this.psm_test_country_code:this.psmGeoActualCookieValue,console.log("psm: entering test mode. ","ver:",this.psmBootstrapVersion,"env:",this.psmBootstrapEnvironment,"geo code:",this.psmGeoActualCookieValue))},loadPsm:function(){this.psmGeoActualCookieValue=this.getCookie(this.psmGeoCookieName),this.applyTestOverrides();var t=!0;if("0.0"===this.psmBootstrapVersion&&(t=!1),this.psmGeoExpectedCookieValues.indexOf(this.psmGeoActualCookieValue)<0&&this.psmShortCircuit&&(t=!1),t)try{this.loadScript("https://lightning."+this.psmHost+"/cdp/psm/i/"+this.psmBootstrapVersion+"/psm.legacy.min.umd.js",this.initPsm)}catch(t){console.log("psm legacy did not load",t)}}};psmMgr.loadPsm();
